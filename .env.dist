# ------------------------------------------
# GENERAL
# ------------------------------------------

DOMAIN=mydomain.com
TZ=Europe/Madrid

# Docker Compose project name. 
# Used as a prefix for all containers (e.g., PROJECT_NAME-traefik-1)
PROJECT_NAME=stack

# ------------------------------------------
# ANUBIS
# ------------------------------------------

ANUBIS_DIFFICULTY=4

# redis key (openssl rand -hex 32)
ANUBIS_REDIS_PRIVATE_KEY=REPLACE_ME

# Resources for each instance: fine-tuning to avoid choking the server or allowing more traffic
ANUBIS_CPU_LIMIT=0.10
ANUBIS_MEM_LIMIT=32M

# ------------------------------------------
# REDIS
# ------------------------------------------

REDIS_PASSWORD=REPLACE_ME

# ------------------------------------------
# CROWDSEC
# ------------------------------------------

# Set to true to completely disable CrowdSec firewall
CROWDSEC_DISABLE=false

# To generate a new key:
# If an old one exists, first: docker exec -t crowdsec cscli bouncers delete traefik-bouncer
# And then: docker exec -t crowdsec cscli bouncers add traefik-bouncer
CROWDSEC_API_KEY=REPLACE_ME

# How often (seconds) the plugin downloads the blacklist from the LAPI.
# Lowering it increases CPU/Network load, raising it increases risk of fresh IPs.
CROWDSEC_UPDATE_INTERVAL=60

# (Optional) Enrollment key for CrowdSec Console.
# Get your key from https://app.crowdsec.net after creating an account.
# Leave empty to skip console enrollment.
CROWDSEC_ENROLLMENT_KEY=

# CrowdSec Collections (scenarios/parsers to load)
# Remove 'crowdsecurity/http-dos' if you get too many false positives
CROWDSEC_COLLECTIONS='crowdsecurity/traefik crowdsecurity/http-cve crowdsecurity/sshd crowdsecurity/whitelist-good-actors crowdsecurity/base-http-scenarios crowdsecurity/http-dos'


# (Optional) Comma-separated list of IP addresses/CIDR ranges to whitelist.
# These IPs will bypass CrowdSec detection entirely.
# Example: 192.168.1.1,10.0.0.0/8,203.0.113.50
CROWDSEC_WHITELIST_IPS=

# (Optional) Comma-separated list of User-Agent regex patterns to blacklist globally.
# Patterns are added to custom_user_agent_blacklist.regex.txt on each start.
# Example: "(?i).*curl.*,(?i).*BadBot.*"
CROWDSEC_BAD_USER_AGENTS=

# ------------------------------------------
# TRAEFIK
# ------------------------------------------

# Local IP address to listen on for ports 80/443.
# Default: 0.0.0.0 (all interfaces)
TRAEFIK_LISTEN_IP=0.0.0.0

# Default average requests per second
TRAEFIK_GLOBAL_RATE_AVG=60

# Default allowed burst (peak)
TRAEFIK_GLOBAL_RATE_BURST=120

# Default concurrent requests (in-flight)
TRAEFIK_GLOBAL_CONCURRENCY=25

# Traefik Timeouts (in seconds)
# Active: readTimeout, writeTimeout, responseHeaderTimeout
TRAEFIK_TIMEOUT_ACTIVE=60

# Idle: idleTimeout, idleConnTimeout
TRAEFIK_TIMEOUT_IDLE=90

# (Optional) Comma-separated list of path prefixes to block globally across all domains (regex supported).
# Example: "/root/,/wp-admin/,/xmlrpc.php"
TRAEFIK_BLOCKED_PATHS=""

# Security Headers middleware: HSTS Max Age in seconds.
# CAUTION: Use 0 to disable or low values (300) during testing.
# Use 31536000 (1 year) only when everything is stable.
TRAEFIK_HSTS_MAX_AGE=31536000

# (Optional) Comma-separated list of external domains allowed to embed this site in an iframe.
# Example: https://external-site.com,https://another-site.org
# If left empty, iframes are blocked by default (SAMEORIGIN).
TRAEFIK_FRAME_ANCESTORS=""

# Required for Let's Encrypt certificate issuance
TRAEFIK_ACME_EMAIL=email@mydomain.com

# ACME Environment Type: 'staging', 'production' or 'local'
# staging:    https://acme-staging-v02.api.letsencrypt.org/directory (Safe for testing)
# production: https://acme-v02.api.letsencrypt.org/directory (Real certs, strict limits)
# local:      Self-signed certificates (No Let's Encrypt). Use for local dev with .local domains.
TRAEFIK_ACME_ENV_TYPE=staging

# (Optional) Direct URL override.
# Note: TRAEFIK_ACME_ENV_TYPE takes precedence if set. 
# To use this custom URL, leave TRAEFIK_ACME_ENV_TYPE empty or commented out.
# TRAEFIK_ACME_CA_SERVER=

# Admin credentials for Traefik Dashboard
TRAEFIK_ADMIN_USER=user
TRAEFIK_ADMIN_PASSWORD=password

# Generated with: docker run --rm httpd:alpine htpasswd -Bbn user password
TRAEFIK_DASHBOARD_AUTH='user:password'

# Internal use: detects changes to Traefik admin credentials
TRAEFIK_ADMIN_CREDS_SYNC=REPLACE_ME

# ------------------------------------------
# DOZZLE
# ------------------------------------------

DOZZLE_ADMIN_USER=user
DOZZLE_ADMIN_PASSWORD=password

# Generated automatically from credentials above
DOZZLE_DASHBOARD_AUTH='user:password'

# Internal use: detects changes to Dozzle admin credentials
DOZZLE_ADMIN_CREDS_SYNC=REPLACE_ME

# ------------------------------------------
# DOMAIN MANAGER
# ------------------------------------------

DOMAIN_MANAGER_ADMIN_USER=admin
DOMAIN_MANAGER_ADMIN_PASSWORD=password
DOMAIN_MANAGER_SECRET_KEY=REPLACE_ME
# DOMAIN_MANAGER_APP_PATH_HOST is auto-calculated by start.sh
DOMAIN_MANAGER_APP_PATH_HOST=REPLACE_ME

# ------------------------------------------
# GRAFANA
# ------------------------------------------

GRAFANA_ADMIN_USER=user
GRAFANA_ADMIN_PASSWORD=password

# ------------------------------------------
# WATCHDOG
# ------------------------------------------

# Telegram bot token and recipient ID
WATCHDOG_TELEGRAM_BOT_TOKEN=REPLACE_ME
WATCHDOG_TELEGRAM_RECIPIENT_ID=REPLACE_ME

# Certificate expiration warning threshold (days)
WATCHDOG_CERT_DAYS_WARNING=10

# DNS check interval in seconds (default: 6 hours = 21600)
WATCHDOG_DNS_CHECK_INTERVAL=21600

# How often (seconds) the watchdog checks CrowdSec health.
WATCHDOG_CROWDSEC_CHECK_INTERVAL=3600
